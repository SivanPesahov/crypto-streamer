generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id           Int            @id @default(autoincrement())
  email        String         @unique
  name         String?
  passwordHash String
  role         Role           @default(USER)
  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @updatedAt
  favorites    FavoriteCoin[]
}

model FavoriteCoin {
  id        Int      @id @default(autoincrement())
  userId    Int
  coinId    String
  coinName   String?
  coinSymbol String?
  coinImage  String?
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])

  @@unique([userId, coinId])
}

model daily_prices {
  id         Int       @id @default(autoincrement())
  coin_id    String?   @db.VarChar(100)
  symbol     String?   @db.VarChar(20)
  name       String?   @db.VarChar(100)
  image_url  String?   @db.VarChar(512)
  price_usd  Decimal?  @db.Decimal(18, 8)
  date       DateTime? @db.Date
  created_at DateTime? @default(now()) @db.Timestamp(0)
}

enum Role {
  USER
  ADMIN
}
